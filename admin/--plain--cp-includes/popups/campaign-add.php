<?php/** * * * Zenbership Membership Software * Copyright (C) 2013-2016 Castlamp, LLC * * This program is free software: you can redistribute it and/or modify * it under the terms of the GNU General Public License as published by * the Free Software Foundation, either version 3 of the License, or * (at your option) any later version. * * This program is distributed in the hope that it will be useful, * but WITHOUT ANY WARRANTY; without even the implied warranty of * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the * GNU General Public License for more details. * * You should have received a copy of the GNU General Public License * along with this program.  If not, see <http://www.gnu.org/licenses/>. * * @author      Castlamp * @link        http://www.castlamp.com/ * @link        http://www.zenbership.com/ * @copyright   (c) 2013-2016 Castlamp * @license     http://www.gnu.org/licenses/gpl-3.0.en.html * @project     Zenbership Membership Software */if (!empty($_POST['criteria_id'])) {    $cid     = generate_id('random', '11');    $editing = '0';    // Get Criteria    $criteria = new criteria($_POST['criteria_id']);} else {    $admin->show_popup_error('You must build criteria for this campaign.');    exit;}?><script type="text/javascript">    $.ctrl('S', function () {        return json_add('campaign-add', '<?php echo $cid; ?>', '<?php echo $editing; ?>', 'popupform');    });</script><form action="" method="post" id="popupform"      onsubmit="return json_add('campaign-add','<?php echo $cid; ?>','<?php echo $editing; ?>','popupform');"><div id="popupsave">    <input type="submit" value="Save" class="save"/>    <input type="hidden" name="optin_type" value="criteria"/></div><h1>Campaign Creator</h1><div id="pop_inner" class="pad24t popupbody">    <p class="highlight smaller">Now that we have established the criteria that will be used to determine who will receive        the campaign's messages, we can set up the campaign. In the next step you'll be able to create the messages that        belong to this campaign.</p><fieldset>    <legend>Basic Details</legend>    <div class="pad24t">        <div class="field">            <label>Status</label>            <div class="field_entry">                <input type="radio" name="status" value="1" checked="checked"/> Active <input type="radio" name="status"                                                                                              value="0"/> Inactive            </div>        </div>        <div class="field">            <label>Campaign Title</label>            <div class="field_entry">                <input type="text" id="name" value="" name="name" style="width:450px;" class="filterinputtype"/>            </div>        </div>    </div></fieldset><fieldset>    <legend>Criteria &amp; Settings</legend>    <div class="pad24t">        <div class="field">            <label>Criteria</label>            <div class="field_entry">                <input type="hidden" name="criteria_id"                       value="<?php echo $criteria->{'data'}['id']; ?>"/> <?php echo $criteria->{'data'}['name']; ?>            </div>        </div>        <div class="field">            <label>Target</label>            <div class="field_entry">                <input type="hidden" name="user_type" value="<?php echo $criteria->{'data'}['type']; ?>"/> <?php                if ($criteria->{'data'}['type'] == 'member') {                    echo "Members";                } else if ($criteria->{'data'}['type'] == 'contact') {                    echo "Contacts";                } else if ($criteria->{'data'}['type'] == 'rsvp') {                    echo "Event Registrations";                } else {                    echo "Accounts";                }                ?>            </div>        </div>        <div class="field">            <label>Update Activity</label>            <div class="field_entry">                <input type="radio" name="update_activity" value="1" checked="checked"/> Update Activity<br/>                <input type="radio" name="update_activity" value="0"/> Do Not Update Activity                <p class="field_desc">If set to "Update Activity", the contacts/members "last activity" date will be                    updated with each message.</p>            </div>        </div>    </div></fieldset><fieldset>    <legend>Settings</legend>    <div class="pad24t">        <div class="field">            <label>Type</label>            <div class="field_entry">                <select name="type" style="width:400px;">                    <option value="email">E-Mail</option>                    <!--                    <option value="sms">SMS</option>                    <option value="twitter">Twitter</option>                    <option value="facebook">Facebook</option>                    -->                </select>            </div>        </div>        <div class="field">            <label>When</label>            <div class="field_entry">                <select name="when_type" style="width:400px;">                    <option value="after_join">After Joining/Creation Date</option>                    <option value="exact_date">On Specific Dates</option>                </select>            </div>        </div>        <div class="field">            <label>Kill Condition</label>            <div class="field_entry">                <select name="kill_condition" style="width:400px;">                    <option value="unsubscribe">Unsubscription</option>                    <option value="on_open">Message Opened</option>                    <option value="purchase">Purchase After Link Click</option>                    <option value="register">Register After Link Click</option>                    <option value="form_submit">Form Submission After Link Click</option>                    <option value="rsvp">Event Registration</option>                </select>            </div>        </div>    </div></fieldset></div></div></form>